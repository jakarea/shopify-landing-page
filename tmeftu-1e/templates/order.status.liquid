{% layout 'theme' %}

<div class="order-status-page" style="min-height: 100vh; background: var(--background); padding: 2rem 1rem 4rem;">
  <div style="max-width: 900px; margin: 0 auto;">

    <!-- Order Header -->
    <div style="text-align: center; margin-bottom: 3rem;">
      <div style="width: 80px; height: 80px; background: var(--accent); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem;">
        <i class="fas fa-check" style="font-size: 2.5rem; color: var(--background);"></i>
      </div>
      <h1 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--foreground);" data-translate="order_status_title">
        Thank You for Your Purchase! {{ shop.name }}
      </h1>
      <p style="color: var(--muted-foreground); font-size: 1.1rem;" data-translate="order_status_subtitle">
        Your download links are ready below. Select your preferred language.
      </p>
      <p style="margin-top: 1rem; font-size: 0.9rem; color: var(--muted-foreground);">
        Order: {{ order_name }}
      </p>
    </div>

    <!-- Order Details -->
    <div class="order-details" style="background: var(--card); border-radius: 1rem; padding: 2rem; border: 1px solid var(--border); margin-bottom: 2rem;">
      <h2 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1.5rem; color: var(--foreground);" data-translate="order_status_details_title">
        Order Details
      </h2>
      <div style="display: grid; gap: 1rem;">
        <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid var(--border);">
          <span style="color: var(--muted-foreground);" data-translate="order_status_order_number">Order Number:</span>
          <span style="font-weight: 500;">{{ order_name }}</span>
        </div>
        <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid var(--border);">
          <span style="color: var(--muted-foreground);" data-translate="order_status_order_date">Order Date:</span>
          <span style="font-weight: 500;">{{ order.created_at | date: "%B %d, %Y" }}</span>
        </div>
        <div style="display: flex; justify-content: space-between; padding: 0.75rem 0;">
          <span style="color: var(--muted-foreground);" data-translate="order_status_email">Email:</span>
          <span style="font-weight: 500;">{{ customer.email }}</span>
        </div>
        {% if order.financial_status_label %}
        <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid var(--border);">
          <span style="color: var(--muted-foreground);" data-translate="order_status_payment">Payment Status:</span>
          <span style="font-weight: 500; color: var(--accent);">{{ order.financial_status_label }}</span>
        </div>
        {% endif %}
        {% if order.fulfillment_status_label %}
        <div style="display: flex; justify-content: space-between; padding: 0.75rem 0;">
          <span style="color: var(--muted-foreground);" data-translate="order_status_fulfillment">Fulfillment Status:</span>
          <span style="font-weight: 500;">{{ order.fulfillment_status_label }}</span>
        </div>
        {% endif %}
      </div>
    </div>

    <!-- Products and Downloads -->
    {% for line_item in line_items %}
      {% assign product = line_item.product %}
      {% if product != blank %}
        <div class="product-downloads" style="background: var(--card); border-radius: 1rem; padding: 2rem; border: 1px solid var(--border); margin-bottom: 2rem;">
          <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--foreground);">
            {{ product.title }}
          </h3>
          {% if line_item.variant %}
          <p style="color: var(--muted-foreground); margin-bottom: 1.5rem;">{{ line_item.variant.title }}</p>
          {% endif %}

          <!-- Message about all languages -->
          <p style="text-align: center; margin-bottom: 1.5rem; color: var(--accent); font-weight: 500; padding: 0.75rem; background: rgba(32, 178, 170, 0.1); border-radius: 0.5rem;" data-translate="order_status_all_languages">
            üåê All language versions are available for download below
          </p>

          <!-- Download Links Section -->
          <div class="downloads-list">
            <!-- Show all variants with download links -->
            <div class="variants-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 1rem;">
              {% for variant in product.variants %}
                {% if variant.available %}
                  <a href="{{ variant.url }}" class="variant-download-btn" target="_blank" rel="noopener"
                     style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem; padding: 1.25rem 1rem; background: var(--background); border: 2px solid var(--border); border-radius: 0.75rem; text-decoration: none; color: var(--foreground); transition: all 0.2s; cursor: pointer; text-align: center;"
                     onmouseover="this.style.borderColor='var(--accent)'; this.style.transform='translateY(-2px)'"
                     onmouseout="this.style.borderColor='var(--border)'; this.style.transform='translateY(0)'">
                    <span style="font-size: 1.5rem;">üåê</span>
                    <span style="font-weight: 600; font-size: 0.85rem;">{{ variant.title }}</span>
                    <span style="font-size: 0.7rem; color: var(--muted-foreground);" data-translate="order_status_download">Download</span>
                  </a>
                {% endif %}
              {% endfor %}
            </div>

            <!-- Digital Downloads App Files -->
            {% if line_item.downloads and line_item.downloads.size > 0 %}
              <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px dashed var(--border);">
                <h4 style="font-size: 1rem; font-weight: 600; margin-bottom: 1rem; color: var(--foreground);" data-translate="order_status_files_title">
                  Your Files
                </h4>
                {% for download in line_item.downloads %}
                  <div style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; background: var(--background); border: 1px solid var(--border); border-radius: 0.5rem; margin-bottom: 0.5rem;">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                      <i class="fas fa-file" style="color: var(--accent);"></i>
                      <span style="font-weight: 500; font-size: 0.9rem;">{{ download.name }}</span>
                      {% if download.size %}
                        <span style="font-size: 0.75rem; color: var(--muted-foreground);">({{ download.size }})</span>
                      {% endif %}
                    </div>
                    <a href="{{ download.url }}" class="download-btn-link" target="_blank" style="color: var(--accent); font-weight: 500; text-decoration: none; display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem;">
                      <i class="fas fa-download"></i>
                    </a>
                  </div>
                {% endfor %}
              </div>
            {% endif %}
          </div>
        </div>
      {% endif %}
    {% endfor %}

    <!-- Help Section -->
    <div style="margin-top: 3rem; text-align: center; padding: 2rem; background: var(--card); border-radius: 1rem; border: 1px solid var(--border);">
      <h4 style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;" data-translate="order_status_help_title">Need Help?</h4>
      <p style="color: var(--muted-foreground); margin-bottom: 1rem; font-size: 0.9rem;" data-translate="order_status_help_desc">If you have any issues downloading your files, please contact our support team.</p>
      <a href="mailto:{{ shop.email }}" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: var(--accent); color: var(--background); border-radius: 0.5rem; text-decoration: none; font-weight: 500;">
        <i class="fas fa-envelope"></i> <span data-translate="order_status_contact">Contact Support</span>
      </a>
    </div>

    <!-- Continue Shopping -->
    <div style="text-align: center; margin-top: 2rem;">
      <a href="/" class="continue-shopping-btn" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: transparent; border: 1px solid var(--border); border-radius: 0.5rem; color: var(--foreground); text-decoration: none; font-weight: 500; transition: all 0.2s;">
        <i class="fas fa-arrow-left"></i> <span data-translate="order_status_continue">Continue Shopping</span>
      </a>
    </div>
  </div>
</div>

<style>
  @media (max-width: 640px) {
    .variants-grid {
      grid-template-columns: repeat(2, 1fr) !important;
    }
  }

  .variant-download-btn:hover {
    box-shadow: 0 4px 12px rgba(32, 178, 170, 0.2);
  }

  .continue-shopping-btn:hover {
    background: var(--card);
  }
</style>
